<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#070710" />

  <title>Keyboard Tester</title>
  <meta name="description" content="Keyboard tester: full layout, capture mode, latch highlight, day/night. Works locally." />

  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="icon" href="favicon.svg" type="image/svg+xml" />
  <link rel="stylesheet" href="styles.css" />
</head>

<body data-theme="night">
  <header class="topbar" id="topbar">
    <div class="topbar__left">
      <div class="brand">
        <span class="brand__logo">K</span>
        <div class="brand__txt">
          <div class="brand__title">Keyboard Tester</div>
          <div class="brand__sub">Full layout • Capture • Latch • Day/Night • Offline</div>
        </div>
      </div>
    </div>

    <div class="topbar__right">
      <button class="pill" id="livePill" type="button" title="Статус">
        <span class="dot dot--live"></span>
        <span>Live</span>
      </button>

      <button class="pill pill--on" id="captureBtn" type="button" title="Гасит хоткеи/скролл браузера">
        Capture: ON
      </button>

      <button class="pill pill--accent" id="modeBtn" type="button" title="Режим подсветки">
        Mode: Live
      </button>

      <button class="pill" id="clearLatchBtn" type="button" title="Сбросить запомненные клавиши">
        Clear
      </button>

      <button class="pill" id="themeBtn" type="button" title="Сменить тему">
        Theme: Night
      </button>

      <button class="pill" id="helpBtn" type="button" title="Как пользоваться">
        Help
      </button>
    </div>
  </header>

  <main class="stage" id="stage" tabindex="0" aria-label="Keyboard tester stage">
    <section class="hud">
      <div class="hud__row">
        <div class="hud__key" id="hudKey">—</div>
        <div class="hud__meta" id="hudMeta">Нажми клавишу</div>
      </div>

      <div class="hud__row2">
        <span class="chip" id="chipKey">event.key: —</span>
        <span class="chip" id="chipCode">event.code: —</span>
        <span class="chip" id="chipKeyCode">keyCode: —</span>
        <span class="chip" id="chipDown">down: 0</span>
        <span class="chip" id="chipMax">max: 0</span>
      </div>
    </section>

    <section class="kbViewport" id="kbViewport" aria-label="Keyboard viewport">
      <div class="kbScaler" id="kbScaler">
        <div class="keyboard" id="keyboard"></div>
      </div>
    </section>
  </main>

  <!-- HELP MODAL -->
  <div class="modalRoot" id="modalRoot" aria-hidden="true">
    <div class="modalBackdrop" id="modalBackdrop"></div>

    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="helpTitle">
      <div class="modal__header">
        <div class="modal__title" id="helpTitle">Как пользоваться</div>
        <button class="iconBtn" id="helpCloseX" type="button" aria-label="Закрыть">✕</button>
      </div>

      <div class="modal__body">
        <ul class="list">
          <li><b>Live</b> — подсветка только пока удерживаешь.</li>
          <li><b>Latch</b> — нажатие <b>запоминает</b> клавишу и держит подсветку. Повторное нажатие снимает.</li>
          <li><b>Clear</b> — сброс запомненных клавиш.</li>
          <li><b>Capture ON</b> — глушит хоткеи браузера (Ctrl/Meta+…, Space, стрелки и т.п.).</li>
          <li>Закрытие окна: <b>Close</b>, <b>Esc</b>, или клик вне окна.</li>
        </ul>
      </div>

      <div class="modal__footer">
        <button class="btn" id="helpCloseBtn" type="button">Close</button>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
